angular.module('flapperNews', ['ui.router', 'templates'])
    .config([
    '$stateProvider',
    '$urlRouterProvider',
    function($stateProvider, $urlRouterProvider) {

      $stateProvider
        .state('home', {
          url: '/home',
          templateUrl: 'home/_home.html',
          controller: 'MainCtrl'
        })
        .state('posts', {
          url: '/posts/{id}',
          templateUrl: 'posts/_posts.html',
          controller: 'PostsCtrl'
        });
      $urlRouterProvider.otherwise('home');
    }])


 

    .controller('PostsCtrl', [
        '$scope',
        '$stateParams',
        'posts',
        function($scope, $stateParams, posts){
            $scope.post = posts.posts[$stateParams.id];
            $scope.addComment = function(){
            if($scope.body === '') { return; }
            $scope.post.comments.push({
              body: $scope.body,
              author: 'user',
              upvotes: 0
            });
            $scope.body = '';
          };
        }])

